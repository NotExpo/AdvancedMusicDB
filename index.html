<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Music Database</title>
    <style></style>
  </head>
  <body>
    <!-- HTML -->
    <script>
        async function getSongsFiles() {
          try {
              const response = await fetch('Songs/');
              const html = await response.text();
              const parser = new DOMParser();
              const doc = parser.parseFromString(html, 'text/html');
              const links = Array.from(doc.querySelectorAll('a'));
              const audios = [];
              const images = [];
              links.forEach(link => {
                  const href = link.getAttribute('href');
                  if (href.match(/\.(mp3|wav|ogg)$/i)) {
                      audios.push(href);
                  } else if (href.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                      images.push(href);
                  }
              });
              console.log('Loaded Songs:', { audios, images });
              return { 
                  audios, 
                  images, 
                  audioCount: audios.length, 
                  imageCount: images.length 
              };
          } catch (err) {
              console.error('Failed to load Songs:', err);
              return { audios: [], images: [], audioCount: 0, imageCount: 0 };
          }
      }
    const songsData = await getSongsFiles();
    const container = document.createElement('div');
    container.id = "songs-container";
    container.style.display = "flex";
    container.style.flexWrap = "wrap";
    container.style.gap = "5px";

    // Append to #main-box instead of body
    mainBox.appendChild(container);

    for (let i = 0; i < songsData.audioCount; i++) {
        const imgSrc = songsData.images[i % songsData.imageCount] || '';
        const audioSrc = songsData.audios[i];
        const imgElem = document.createElement('img');
        imgElem.id = "PlaySong";
        imgElem.src = imgSrc;
        imgElem.style.width = "50px";
        imgElem.style.height = "50px";
        imgElem.style.borderRadius = "50px";
        imgElem.style.cursor = "pointer";
        imgElem.onclick = () => playSong(imgSrc, audioSrc);
        container.appendChild(imgElem);
    }
      }
    </script>
  </body>
</html>
